version: "0.0.1"


def:
  arg:
    arg1: "123"
    arg2: [ "a", "b", "c" ]

stage:
  g1:
    step:
      s1:
        let:
          s2_loop_idx:
            $reg: 0
        exec:
          action: nop
      
      s2:
        let:
          s2_loop_idx:
            $reg:
              $num: "{{num_add reg.s2_loop_idx 1}}"
          arg2:
            $ref: def.arg.arg2
        exec:
          action: echo
          args:
            echo:
              - hello
              - hello: world
              - $ref: arg2
        
        assert: |
          (all
              (eq value.0 "hello")
              (eq value.1.hello "world")
              (eq value.2.1 "b")
          )
        then:
          goto:
            s2: (lt s2_loop_idx 3)
            
            
              
        
      
     

